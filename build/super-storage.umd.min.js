!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).superStorage={})}(this,(function(e){"use strict";var s={prefix:"",prefixSession:"session",prefixCookie:"",sessionCookie:"__superStorageSession",sessionNative:!1};class t{constructor(e={}){this.settings=Object.assign({},s,e)}setItem(e,s,t={domain:window.location.hostname,path:"/"}){let i="";if(t.expires){const e=new Date;e.setTime(e.getTime()+1e3*t.expires),i+="expires="+e.toUTCString()+";"}t.maxAge&&(i+="max-age="+t.maxAge+";"),t.path&&(i+="path="+t.path+";"),t.domain&&(i+="domain="+t.domain+";"),t.secure&&(i+="secure;"),document.cookie=this.key(e)+"="+JSON.stringify(s)+";"+i}getItem(e,s=null){const t=document.cookie.match("(^|;)\\s*"+this.key(e)+"\\s*=\\s*([^;]+)"),i=t?t.pop():s;try{return JSON.parse(i)}catch(e){return i}}removeItem(e,s={domain:window.location.hostname,path:"/"}){let t="";s.path&&(t+="path="+s.path+";"),s.domain&&(t+="domain="+s.domain+";"),document.cookie=this.key(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT;"+t}key(e){const s=[];return this.settings.prefixCookie&&s.push(this.settings.prefixCookie),s.push(e),s.join(".")}}class i{constructor(e,t={}){this.storage=e,this.settings=Object.assign({},s,t)}getItem(e,s=null){const t=this.storage.getItem(this.key(e));if(!t)return s;try{return JSON.parse(t)}catch(e){return t}}setItem(e,s){return"object"==typeof s&&(s=JSON.stringify(s)),this.storage.setItem(this.key(e),s)}removeItem(e){return this.storage.removeItem(this.key(e))}clear(e=null){if(e){Object.keys(this.storage).forEach((s=>{0===s.indexOf(this.key(e))&&this.storage.removeItem(s)}))}else this.storage.clear()}key(e){const s=[];return this.settings.prefix&&s.push(this.settings.prefix),s.push(e),s.join(".")}}e.SuperCookie=t,e.SuperLocalStorage=class extends i{constructor(e={}){super(window.localStorage,e)}},e.SuperSessionStorage=class extends i{constructor(e={}){(e=Object.assign({},s,e)).sessionNative?super(window.sessionStorage,e):super(window.localStorage,e),this.settings.sessionNative||(this.superCookie=new t(this.settings),this.checkSession()||this.killSession())}getItem(e,s=null){return super.getItem(this.sessionKey(e),s)}setItem(e,s){return super.setItem(this.sessionKey(e),s)}removeItem(e){return super.removeItem(this.sessionKey(e))}clear(){return super.clear(this.sessionKey(""))}sessionKey(e){const s=[e];return this.settings.sessionNative?e:(this.settings.prefixSession&&s.unshift(this.settings.prefixSession),s.join("."))}checkSession(){return!!this.superCookie.getItem(this.settings.sessionCookie)}killSession(){this.superCookie.setItem(this.settings.sessionCookie,"YES"),this.clear()}},Object.defineProperty(e,"__esModule",{value:!0})}));
